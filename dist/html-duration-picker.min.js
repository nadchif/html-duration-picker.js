!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.HtmlDurationPicker=e():t.HtmlDurationPicker=e()}(this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e),
/**
 * @preserve
 * html-duration-picker.js
 *
 * @description Turn an html input box to a duration picker, without jQuery
 * @version 2.2.0
 * @author Chif <nadchif@gmail.com>
 * @license Apache-2.0
 *
 */e.default=function(){const t=({target:{selectionStart:t,value:e}},r)=>{const n=e.indexOf(":"),a=e.lastIndexOf(":");let o;return t<n&&(o="hours"),t>n&&(r||t-1<a)&&(o="minutes"),!r&&t>a&&(o="seconds"),{cursorSelection:o,hideSeconds:r,hourMarker:n,minuteMarker:a}},e=e=>{const n=r(e.target),{cursorSelection:a,hourMarker:o,minuteMarker:i}=t(e,n);if(a){if("hours"===a)return e.target.setAttribute("data-adjustment-mode",3600),void e.target.setSelectionRange(0,o);if("minutes"===a){const t=n?3:0;return e.target.setAttribute("data-adjustment-mode",60),void e.target.setSelectionRange(o+1,i+t)}if("seconds"===a)return e.target.setAttribute("data-adjustment-mode",1),void e.target.setSelectionRange(i+1,i+3);e.target.setAttribute("data-adjustment-mode","ss"),e.target.setSelectionRange(i+1,i+3)}},r=t=>t.dataset.hasOwnProperty("hideSeconds")&&"false"!==t.dataset.hideSeconds,n=(t,e)=>{const n=Math.floor(e/3600);e%=3600;const a=Math.floor(e/60),o=e%60,i=String(n).padStart(2,"0"),s=String(a).padStart(2,"0"),d=String(o).padStart(2,"0"),u=`${i}:${s}`;t.value=r(t)?u:`${u}:${d}`,t.dispatchEvent(new Event("input")),t.dispatchEvent(new Event("change"))},a=(t,e)=>{const n=t.value.indexOf(":"),a=t.value.lastIndexOf(":"),o=r(t);return t.focus(),t.select(),e>=3600?(t.selectionStart=0,void(t.selectionEnd=n)):e>=60&&!o?(t.selectionStart=n+1,void(t.selectionEnd=a)):(t.selectionStart=a+1,void(t.selectionEnd=a+3))},o=t=>{let e=1;return Number(t.getAttribute("data-adjustment-mode"))>0&&(e=Number(t.getAttribute("data-adjustment-mode"))),e},i=(t,e)=>{const r=o(t);let i=l(t.value);switch(e){case"up":i+=r;break;case"down":i-=r,i<0&&(i=0)}const s=u(t,i);n(t,s),a(t,r)},s=(t,e)=>{const r=o(t);switch(e){case"left":a(t,60*r);break;case"right":a(t,r/60)}},d=t=>RegExp("^[0-9][0-9]:[0-5][0-9]:[0-5][0-9]$").test(t),u=(t,e)=>{const{maxDuration:r,minDuration:n}=h(t);return Math.min(Math.max(e,n),r)},l=t=>{const e=t.split(":");return e.length<2?0:Number(e[2]||0)+Number(60*e[1])+Number(60*e[0]*60)},c=e=>{const n=r(e.target),{cursorSelection:a}=t(e,n),o=e.target.value.split(":");e.target.dataset.duration&&d(e.target.dataset.duration)&&(n&&2!==o.length||!n&&3!==o.length)?e.target.value=e.target.dataset.duration:n||3===o.length?n&&2!==o.length?e.target.value="00:00":(isNaN(o[0])&&(o[0]="00"),(isNaN(o[1])||o[1]<0)&&(o[1]="00"),(o[1]>59||o[1].length>2)&&(o[1]="59"),2===o[1].length&&o[1].slice(-1)===e.key&&"minutes"===a&&s(e.target,"right"),n||((isNaN(o[2])||o[2]<0)&&(o[2]="00"),(o[2]>59||o[2].length>2)&&(o[2]="59")),e.target.value=o.join(":")):e.target.value="00:00:00"},p=t=>{const e=t.target,r=e.value||e.dataset.duration,a=l(r);n(e,u(e,a))},g=t=>{if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight","Enter"].includes(t.key)){switch(t.key){case"ArrowDown":i(t.target,"down");break;case"ArrowUp":i(t.target,"up");break;case"ArrowLeft":s(t.target,"left");break;case"ArrowRight":s(t.target,"right");break;case"Enter":p(t),t.target.blur()}t.preventDefault()}if(isNaN(t.key)&&!["Backspace","ArrowDown","ArrowUp","Tab"].includes(t.key))return t.preventDefault(),!1},f=(t,e,r)=>{const n=t.dataset[e];return d(n)?l(n):r},h=t=>({minDuration:f(t,"durationMin",0),maxDuration:f(t,"durationMax",1/0)}),b=()=>(document.querySelectorAll("input.html-duration-picker").forEach(t=>{if("true"==t.getAttribute("data-upgraded"))return;const r=t.currentStyle||window.getComputedStyle(t),a=r.marginRight,o=r.marginLeft,s=r.width;t.setAttribute("data-upgraded",!0),n(t,(t=>{const e=f(t,"duration",0);return u(t,e)})(t)),t.style.textAlign="right",t.style.paddingRight="20px",t.style.boxSizing="border-box",t.style.width="100%",t.style.margin=0,t.style.cursor="text",t.setAttribute("aria-label","Duration Picker"),t.addEventListener("keydown",g),t.addEventListener("select",e),t.addEventListener("mouseup",e),t.addEventListener("change",c),t.addEventListener("blur",p),t.addEventListener("keyup",c),t.addEventListener("drop",t=>t.preventDefault());const d=document.createElement("button"),l=document.createElement("button"),h=[d,l];d.setAttribute("aria-label","Increase duration"),d.setAttribute("style",`text-align:center; width: 16px;padding: 0px 4px; border:none; cursor:default;\n        height:${t.offsetHeight/2-1}px !important; position:absolute; top: 1px;`),l.setAttribute("aria-label","Decrease duration"),l.setAttribute("style",`text-align:center; width: 16px;padding: 0px 4px; border:none; cursor:default;\n        height:${t.offsetHeight/2-1}px !important; position:absolute; top: ${t.offsetHeight/2-1}px;`);const b=document.createElement("div"),m=document.createElement("div");b.setAttribute("style","width:0;height:0;\n        border-style:solid;border-width:0 4px 5px 4px; border-color:transparent transparent #000 transparent"),m.setAttribute("style","width:0;height:0;\n        border-style:solid;border-width:5px 4px 0 4px; border-color:#000 transparent transparent transparent"),l.appendChild(m),d.appendChild(b),h.forEach(e=>{let r;e.addEventListener("mousedown",n=>{n.target.style.transform="translateY(1px)",n.preventDefault(),e==d?(i(t,"up"),r=setInterval(i,200,t,"up")):(i(t,"down"),r=setInterval(i,200,t,"down"))}),e.addEventListener("mouseup",t=>{t.target.style.transform="translateY(0)",clearInterval(r)}),e.addEventListener("mouseleave",t=>{t.target.style.transform="translateY(0)",clearInterval(r)})});const v=document.createElement("div");v.setAttribute("style",`display:inline-block; position: absolute;top:1px;left: ${parseFloat(s)-20}px;\n        height:${t.offsetHeight}px; padding:2px 0`),v.appendChild(d),v.appendChild(l);const x=document.createElement("div");x.setAttribute("style",`display: inline-block; position: relative; background: transparent;\n        padding: 0px; width: ${s}; margin-left: ${o}; margin-right: ${a};`),x.classList.add("html-duration-picker-wrapper"),t.parentNode.insertBefore(x,t),x.appendChild(t),x.appendChild(v)}),!0);return window.addEventListener("DOMContentLoaded",()=>b()),{init:b,refresh:b}}()}]).default}));